"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/login/page",{

/***/ "(app-pages-browser)/./src/lib/auth.ts":
/*!*************************!*\
  !*** ./src/lib/auth.ts ***!
  \*************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   generateToken: function() { return /* binding */ generateToken; },\n/* harmony export */   getStoredToken: function() { return /* binding */ getStoredToken; },\n/* harmony export */   getUserFromToken: function() { return /* binding */ getUserFromToken; },\n/* harmony export */   loginUser: function() { return /* binding */ loginUser; },\n/* harmony export */   removeStoredToken: function() { return /* binding */ removeStoredToken; },\n/* harmony export */   signupUser: function() { return /* binding */ signupUser; },\n/* harmony export */   storeToken: function() { return /* binding */ storeToken; },\n/* harmony export */   verifyToken: function() { return /* binding */ verifyToken; }\n/* harmony export */ });\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jsonwebtoken */ \"(app-pages-browser)/./node_modules/jsonwebtoken/index.js\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jsonwebtoken__WEBPACK_IMPORTED_MODULE_0__);\n/* __next_internal_client_entry_do_not_use__ generateToken,verifyToken,loginUser,signupUser,getUserFromToken,storeToken,getStoredToken,removeStoredToken auto */ // JWT Authentication utilities\n\nconst JWT_SECRET = \"roadmapai-demo-secret\";\nconst JWT_EXPIRES_IN = \"7d\";\n// Mock user database (in real app, this would be a database)\nconst mockUsers = [\n    {\n        id: \"1\",\n        email: \"test@example.com\",\n        name: \"Test User\",\n        avatar: \"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=32&h=32&fit=crop&crop=face\",\n        createdAt: new Date(\"2024-01-01\")\n    },\n    {\n        id: \"2\",\n        email: \"demo@roadmapai.com\",\n        name: \"Demo User\",\n        avatar: \"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=32&h=32&fit=crop&crop=face\",\n        createdAt: new Date(\"2024-01-02\")\n    }\n];\n// Log mock users on module load\nconsole.log(\"Initial mock users:\", mockUsers);\n// Generate JWT token\nfunction generateToken(user) {\n    return jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default().sign({\n        userId: user.id,\n        email: user.email,\n        name: user.name\n    }, JWT_SECRET, {\n        expiresIn: JWT_EXPIRES_IN\n    });\n}\n// Verify JWT token\nfunction verifyToken(token) {\n    console.log(\"Verifying token:\", {\n        token,\n        type: typeof token\n    });\n    if (!token || typeof token !== \"string\") {\n        console.error(\"Invalid token format - token is not a string\");\n        return null;\n    }\n    try {\n        // Verify and decode the token\n        const decoded = jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default().verify(token, JWT_SECRET);\n        // Type guard to check if the decoded object has the required properties\n        if (!decoded || typeof decoded !== \"object\" || !(\"userId\" in decoded) || !(\"email\" in decoded)) {\n            console.error(\"Invalid token payload structure:\", decoded);\n            return null;\n        }\n        // Ensure required fields are present and of correct type\n        if (typeof decoded.userId !== \"string\" || typeof decoded.email !== \"string\") {\n            console.error(\"Invalid token field types:\", decoded);\n            return null;\n        }\n        return {\n            userId: decoded.userId,\n            email: decoded.email,\n            name: decoded.name || \"User\"\n        };\n    } catch (error) {\n        if (error instanceof Error) {\n            console.error(\"Token verification failed:\", {\n                name: error.name,\n                message: error.message,\n                stack: error.stack\n            });\n        } else {\n            console.error(\"Unknown error during token verification:\", error);\n        }\n        return null;\n    }\n}\n// Mock authentication functions\nasync function loginUser(email, password) {\n    try {\n        console.log(\"=== LOGIN ATTEMPT STARTED ===\");\n        console.log(\"Email:\", email);\n        // 1. Check if email and password are provided\n        if (!email || !password) {\n            console.log(\"Email or password missing\");\n            return null;\n        }\n        // 2. Hardcoded check for demo accounts\n        let user;\n        if (email.toLowerCase() === \"test@example.com\") {\n            user = {\n                id: \"1\",\n                email: \"test@example.com\",\n                name: \"Test User\",\n                avatar: \"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=32&h=32&fit=crop&crop=face\",\n                createdAt: new Date(\"2024-01-01\")\n            };\n        } else if (email.toLowerCase() === \"demo@roadmapai.com\") {\n            user = {\n                id: \"2\",\n                email: \"demo@roadmapai.com\",\n                name: \"Demo User\",\n                avatar: \"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=32&h=32&fit=crop&crop=face\",\n                createdAt: new Date(\"2024-01-02\")\n            };\n        }\n        console.log(\"User found?:\", user ? \"Yes\" : \"No\");\n        if (!user) {\n            console.log(\"No user found with email:\", email);\n            return null;\n        }\n        // 3. Generate token\n        console.log(\"Generating token for user:\", user.id);\n        const token = jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default().sign({\n            userId: user.id,\n            email: user.email,\n            name: user.name\n        }, JWT_SECRET, {\n            expiresIn: JWT_EXPIRES_IN\n        });\n        if (!token) {\n            console.error(\"Failed to generate token\");\n            return null;\n        }\n        console.log(\"Token generated successfully\");\n        console.log(\"=== LOGIN SUCCESSFUL ===\");\n        return {\n            token,\n            user\n        };\n    } catch (error) {\n        console.error(\"!!! LOGIN ERROR !!!\");\n        console.error(\"Error details:\", {\n            name: error instanceof Error ? error.name : \"Unknown\",\n            message: error instanceof Error ? error.message : String(error)\n        });\n        return null;\n    }\n}\nasync function signupUser(email, password, name) {\n    console.log(\"signupUser called with:\", {\n        email,\n        name,\n        password: password ? \"***\" : \"empty\"\n    });\n    // Validate inputs\n    if (!email || !name || !password) {\n        console.error(\"Missing required fields\");\n        throw new Error(\"All fields are required\");\n    }\n    // Simulate API delay\n    await new Promise((resolve)=>setTimeout(resolve, 1000));\n    console.log(\"Checking for existing user with email:\", email);\n    const existingUser = mockUsers.find((u)=>u.email === email);\n    if (existingUser) {\n        console.log(\"User already exists:\", existingUser.id);\n        throw new Error(\"User already exists\");\n    }\n    try {\n        // Create new user\n        const newUser = {\n            id: Date.now().toString(),\n            email,\n            name,\n            avatar: \"https://ui-avatars.com/api/?name=\".concat(encodeURIComponent(name), \"&background=random\"),\n            createdAt: new Date()\n        };\n        console.log(\"Created new user:\", newUser);\n        // Add the new user to the mock users array\n        mockUsers.push(newUser);\n        console.log(\"Added user to mock database. Total users:\", mockUsers.length);\n        console.log(\"Generating token for new user...\");\n        const token = generateToken(newUser);\n        console.log(\"Generated token:\", token ? \"\".concat(token.substring(0, 10), \"...\") : \"null\");\n        if (!token) {\n            throw new Error(\"Failed to generate token\");\n        }\n        return {\n            token,\n            user: newUser\n        };\n    } catch (error) {\n        console.error(\"Error in signupUser:\", {\n            name: error === null || error === void 0 ? void 0 : error.name,\n            message: error === null || error === void 0 ? void 0 : error.message,\n            stack: error === null || error === void 0 ? void 0 : error.stack,\n            error: error\n        });\n        throw error; // Re-throw to be handled by the caller\n    }\n}\nasync function getUserFromToken(token) {\n    console.log(\"getUserFromToken called with token:\", token ? \"\".concat(token.substring(0, 10), \"...\") : \"null\");\n    if (!token) {\n        console.log(\"No token provided\");\n        return null;\n    }\n    try {\n        console.log(\"Calling verifyToken...\");\n        const decoded = verifyToken(token);\n        console.log(\"verifyToken result:\", decoded);\n        if (!decoded || !decoded.userId) {\n            console.error(\"Invalid or missing userId in decoded token\");\n            return null;\n        }\n        console.log(\"Looking for user with ID:\", decoded.userId);\n        const user = mockUsers.find((u)=>u.id === decoded.userId);\n        console.log(\"Found user:\", user);\n        if (!user) {\n            console.error(\"User not found in mock database\");\n        }\n        return user || null;\n    } catch (error) {\n        console.error(\"Error in getUserFromToken:\", {\n            name: error === null || error === void 0 ? void 0 : error.name,\n            message: error === null || error === void 0 ? void 0 : error.message,\n            stack: error === null || error === void 0 ? void 0 : error.stack,\n            error: error\n        });\n        return null;\n    }\n}\n// Token storage helpers\nfunction storeToken(token) {\n    if (true) {\n        localStorage.setItem(\"auth_token\", token);\n    }\n}\nfunction getStoredToken() {\n    if (true) {\n        return localStorage.getItem(\"auth_token\");\n    }\n    return null;\n}\nfunction removeStoredToken() {\n    if (true) {\n        localStorage.removeItem(\"auth_token\");\n    }\n}\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QWM3QjtJQUNyQztBQUNGO0FBRU8sU0FBUzhCO0lBQ2QsSUFBSSxJQUFrQixFQUFhO1FBQ2pDLE9BQU9GLGFBQWFHLE9BQU8sQ0FBQztJQUM5QjtJQUNBLE9BQU87QUFDVDtBQUVPLFNBQVNDO0lBQ2QsSUFBSSxJQUFrQixFQUFhO1FBQ2pDSixhQUFhSyxVQUFVLENBQUM7SUFDMUI7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9zcmMvbGliL2F1dGgudHM/NjY5MiJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIGNsaWVudCc7XG4vLyBKV1QgQXV0aGVudGljYXRpb24gdXRpbGl0aWVzXG5pbXBvcnQgand0IGZyb20gJ2pzb253ZWJ0b2tlbic7XG5cbmNvbnN0IEpXVF9TRUNSRVQgPSAncm9hZG1hcGFpLWRlbW8tc2VjcmV0JztcbmNvbnN0IEpXVF9FWFBJUkVTX0lOID0gJzdkJztcblxuZXhwb3J0IGludGVyZmFjZSBVc2VyIHtcbiAgaWQ6IHN0cmluZztcbiAgZW1haWw6IHN0cmluZztcbiAgbmFtZTogc3RyaW5nO1xuICBhdmF0YXI/OiBzdHJpbmc7XG4gIGNyZWF0ZWRBdDogRGF0ZTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBBdXRoVG9rZW4ge1xuICB0b2tlbjogc3RyaW5nO1xuICB1c2VyOiBVc2VyO1xufVxuXG4vLyBNb2NrIHVzZXIgZGF0YWJhc2UgKGluIHJlYWwgYXBwLCB0aGlzIHdvdWxkIGJlIGEgZGF0YWJhc2UpXG5jb25zdCBtb2NrVXNlcnM6IFVzZXJbXSA9IFtcbiAge1xuICAgIGlkOiAnMScsXG4gICAgZW1haWw6ICd0ZXN0QGV4YW1wbGUuY29tJyxcbiAgICBuYW1lOiAnVGVzdCBVc2VyJyxcbiAgICBhdmF0YXI6ICdodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTQ3MjA5OTY0NTc4NS01NjU4YWJmNGZmNGU/dz0zMiZoPTMyJmZpdD1jcm9wJmNyb3A9ZmFjZScsXG4gICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgnMjAyNC0wMS0wMScpLFxuICB9LFxuICB7XG4gICAgaWQ6ICcyJyxcbiAgICBlbWFpbDogJ2RlbW9Acm9hZG1hcGFpLmNvbScsXG4gICAgbmFtZTogJ0RlbW8gVXNlcicsXG4gICAgYXZhdGFyOiAnaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE1MDcwMDMyMTExNjktMGExZGQ3MjI4ZjJkP3c9MzImaD0zMiZmaXQ9Y3JvcCZjcm9wPWZhY2UnLFxuICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoJzIwMjQtMDEtMDInKSxcbiAgfVxuXTtcblxuLy8gTG9nIG1vY2sgdXNlcnMgb24gbW9kdWxlIGxvYWRcbmNvbnNvbGUubG9nKCdJbml0aWFsIG1vY2sgdXNlcnM6JywgbW9ja1VzZXJzKTtcblxuLy8gR2VuZXJhdGUgSldUIHRva2VuXG5leHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGVUb2tlbih1c2VyOiBVc2VyKTogc3RyaW5nIHtcbiAgcmV0dXJuIGp3dC5zaWduKFxuICAgIHsgXG4gICAgICB1c2VySWQ6IHVzZXIuaWQsIFxuICAgICAgZW1haWw6IHVzZXIuZW1haWwsXG4gICAgICBuYW1lOiB1c2VyLm5hbWUgXG4gICAgfSxcbiAgICBKV1RfU0VDUkVULFxuICAgIHsgZXhwaXJlc0luOiBKV1RfRVhQSVJFU19JTiB9XG4gICk7XG59XG5cbi8vIEpXVCBwYXlsb2FkIHR5cGVcbnR5cGUgSnd0UGF5bG9hZCA9IHtcbiAgdXNlcklkOiBzdHJpbmc7XG4gIGVtYWlsOiBzdHJpbmc7XG4gIG5hbWU/OiBzdHJpbmc7XG4gIGlhdD86IG51bWJlcjtcbiAgZXhwPzogbnVtYmVyO1xuICBba2V5OiBzdHJpbmddOiBhbnk7XG59O1xuXG4vLyBWZXJpZnkgSldUIHRva2VuXG5leHBvcnQgZnVuY3Rpb24gdmVyaWZ5VG9rZW4odG9rZW46IHN0cmluZyk6IHsgdXNlcklkOiBzdHJpbmc7IGVtYWlsOiBzdHJpbmc7IG5hbWU6IHN0cmluZyB9IHwgbnVsbCB7XG4gIGNvbnNvbGUubG9nKCdWZXJpZnlpbmcgdG9rZW46JywgeyB0b2tlbiwgdHlwZTogdHlwZW9mIHRva2VuIH0pO1xuICBcbiAgaWYgKCF0b2tlbiB8fCB0eXBlb2YgdG9rZW4gIT09ICdzdHJpbmcnKSB7XG4gICAgY29uc29sZS5lcnJvcignSW52YWxpZCB0b2tlbiBmb3JtYXQgLSB0b2tlbiBpcyBub3QgYSBzdHJpbmcnKTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIHRyeSB7XG4gICAgLy8gVmVyaWZ5IGFuZCBkZWNvZGUgdGhlIHRva2VuXG4gICAgY29uc3QgZGVjb2RlZCA9IGp3dC52ZXJpZnkodG9rZW4sIEpXVF9TRUNSRVQpIGFzIEp3dFBheWxvYWQ7XG4gICAgXG4gICAgLy8gVHlwZSBndWFyZCB0byBjaGVjayBpZiB0aGUgZGVjb2RlZCBvYmplY3QgaGFzIHRoZSByZXF1aXJlZCBwcm9wZXJ0aWVzXG4gICAgaWYgKCFkZWNvZGVkIHx8IHR5cGVvZiBkZWNvZGVkICE9PSAnb2JqZWN0JyB8fCAhKCd1c2VySWQnIGluIGRlY29kZWQpIHx8ICEoJ2VtYWlsJyBpbiBkZWNvZGVkKSkge1xuICAgICAgY29uc29sZS5lcnJvcignSW52YWxpZCB0b2tlbiBwYXlsb2FkIHN0cnVjdHVyZTonLCBkZWNvZGVkKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBcbiAgICAvLyBFbnN1cmUgcmVxdWlyZWQgZmllbGRzIGFyZSBwcmVzZW50IGFuZCBvZiBjb3JyZWN0IHR5cGVcbiAgICBpZiAodHlwZW9mIGRlY29kZWQudXNlcklkICE9PSAnc3RyaW5nJyB8fCB0eXBlb2YgZGVjb2RlZC5lbWFpbCAhPT0gJ3N0cmluZycpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0ludmFsaWQgdG9rZW4gZmllbGQgdHlwZXM6JywgZGVjb2RlZCk7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgdXNlcklkOiBkZWNvZGVkLnVzZXJJZCxcbiAgICAgIGVtYWlsOiBkZWNvZGVkLmVtYWlsLFxuICAgICAgbmFtZTogZGVjb2RlZC5uYW1lIHx8ICdVc2VyJ1xuICAgIH07XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1Rva2VuIHZlcmlmaWNhdGlvbiBmYWlsZWQ6Jywge1xuICAgICAgICBuYW1lOiBlcnJvci5uYW1lLFxuICAgICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlLFxuICAgICAgICBzdGFjazogZXJyb3Iuc3RhY2tcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdVbmtub3duIGVycm9yIGR1cmluZyB0b2tlbiB2ZXJpZmljYXRpb246JywgZXJyb3IpO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuXG4vLyBNb2NrIGF1dGhlbnRpY2F0aW9uIGZ1bmN0aW9uc1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGxvZ2luVXNlcihlbWFpbDogc3RyaW5nLCBwYXNzd29yZDogc3RyaW5nKTogUHJvbWlzZTxBdXRoVG9rZW4gfCBudWxsPiB7XG4gIHRyeSB7XG4gICAgY29uc29sZS5sb2coJz09PSBMT0dJTiBBVFRFTVBUIFNUQVJURUQgPT09Jyk7XG4gICAgY29uc29sZS5sb2coJ0VtYWlsOicsIGVtYWlsKTtcbiAgICBcbiAgICAvLyAxLiBDaGVjayBpZiBlbWFpbCBhbmQgcGFzc3dvcmQgYXJlIHByb3ZpZGVkXG4gICAgaWYgKCFlbWFpbCB8fCAhcGFzc3dvcmQpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdFbWFpbCBvciBwYXNzd29yZCBtaXNzaW5nJyk7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgXG4gICAgLy8gMi4gSGFyZGNvZGVkIGNoZWNrIGZvciBkZW1vIGFjY291bnRzXG4gICAgbGV0IHVzZXI6IFVzZXIgfCB1bmRlZmluZWQ7XG4gICAgXG4gICAgaWYgKGVtYWlsLnRvTG93ZXJDYXNlKCkgPT09ICd0ZXN0QGV4YW1wbGUuY29tJykge1xuICAgICAgdXNlciA9IHtcbiAgICAgICAgaWQ6ICcxJyxcbiAgICAgICAgZW1haWw6ICd0ZXN0QGV4YW1wbGUuY29tJyxcbiAgICAgICAgbmFtZTogJ1Rlc3QgVXNlcicsXG4gICAgICAgIGF2YXRhcjogJ2h0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNDcyMDk5NjQ1Nzg1LTU2NThhYmY0ZmY0ZT93PTMyJmg9MzImZml0PWNyb3AmY3JvcD1mYWNlJyxcbiAgICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgnMjAyNC0wMS0wMScpLFxuICAgICAgfTtcbiAgICB9IGVsc2UgaWYgKGVtYWlsLnRvTG93ZXJDYXNlKCkgPT09ICdkZW1vQHJvYWRtYXBhaS5jb20nKSB7XG4gICAgICB1c2VyID0ge1xuICAgICAgICBpZDogJzInLFxuICAgICAgICBlbWFpbDogJ2RlbW9Acm9hZG1hcGFpLmNvbScsXG4gICAgICAgIG5hbWU6ICdEZW1vIFVzZXInLFxuICAgICAgICBhdmF0YXI6ICdodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTUwNzAwMzIxMTE2OS0wYTFkZDcyMjhmMmQ/dz0zMiZoPTMyJmZpdD1jcm9wJmNyb3A9ZmFjZScsXG4gICAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoJzIwMjQtMDEtMDInKSxcbiAgICAgIH07XG4gICAgfVxuICAgIFxuICAgIGNvbnNvbGUubG9nKCdVc2VyIGZvdW5kPzonLCB1c2VyID8gJ1llcycgOiAnTm8nKTtcbiAgICBcbiAgICBpZiAoIXVzZXIpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdObyB1c2VyIGZvdW5kIHdpdGggZW1haWw6JywgZW1haWwpO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIFxuICAgIC8vIDMuIEdlbmVyYXRlIHRva2VuXG4gICAgY29uc29sZS5sb2coJ0dlbmVyYXRpbmcgdG9rZW4gZm9yIHVzZXI6JywgdXNlci5pZCk7XG4gICAgY29uc3QgdG9rZW4gPSBqd3Quc2lnbihcbiAgICAgIHsgdXNlcklkOiB1c2VyLmlkLCBlbWFpbDogdXNlci5lbWFpbCwgbmFtZTogdXNlci5uYW1lIH0sXG4gICAgICBKV1RfU0VDUkVULFxuICAgICAgeyBleHBpcmVzSW46IEpXVF9FWFBJUkVTX0lOIH1cbiAgICApO1xuICAgIFxuICAgIGlmICghdG9rZW4pIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBnZW5lcmF0ZSB0b2tlbicpO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIFxuICAgIGNvbnNvbGUubG9nKCdUb2tlbiBnZW5lcmF0ZWQgc3VjY2Vzc2Z1bGx5Jyk7XG4gICAgY29uc29sZS5sb2coJz09PSBMT0dJTiBTVUNDRVNTRlVMID09PScpO1xuICAgIFxuICAgIHJldHVybiB7IHRva2VuLCB1c2VyIH07XG4gICAgXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignISEhIExPR0lOIEVSUk9SICEhIScpO1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGRldGFpbHM6Jywge1xuICAgICAgbmFtZTogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm5hbWUgOiAnVW5rbm93bicsXG4gICAgICBtZXNzYWdlOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvcilcbiAgICB9KTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2lnbnVwVXNlcihlbWFpbDogc3RyaW5nLCBwYXNzd29yZDogc3RyaW5nLCBuYW1lOiBzdHJpbmcpOiBQcm9taXNlPEF1dGhUb2tlbiB8IG51bGw+IHtcbiAgY29uc29sZS5sb2coJ3NpZ251cFVzZXIgY2FsbGVkIHdpdGg6JywgeyBcbiAgICBlbWFpbCwgXG4gICAgbmFtZSwgXG4gICAgcGFzc3dvcmQ6IHBhc3N3b3JkID8gJyoqKicgOiAnZW1wdHknIFxuICB9KTtcbiAgXG4gIC8vIFZhbGlkYXRlIGlucHV0c1xuICBpZiAoIWVtYWlsIHx8ICFuYW1lIHx8ICFwYXNzd29yZCkge1xuICAgIGNvbnNvbGUuZXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgZmllbGRzJyk7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdBbGwgZmllbGRzIGFyZSByZXF1aXJlZCcpO1xuICB9XG4gIFxuICAvLyBTaW11bGF0ZSBBUEkgZGVsYXlcbiAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDEwMDApKTtcbiAgXG4gIGNvbnNvbGUubG9nKCdDaGVja2luZyBmb3IgZXhpc3RpbmcgdXNlciB3aXRoIGVtYWlsOicsIGVtYWlsKTtcbiAgY29uc3QgZXhpc3RpbmdVc2VyID0gbW9ja1VzZXJzLmZpbmQodSA9PiB1LmVtYWlsID09PSBlbWFpbCk7XG4gIFxuICBpZiAoZXhpc3RpbmdVc2VyKSB7XG4gICAgY29uc29sZS5sb2coJ1VzZXIgYWxyZWFkeSBleGlzdHM6JywgZXhpc3RpbmdVc2VyLmlkKTtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1VzZXIgYWxyZWFkeSBleGlzdHMnKTtcbiAgfVxuICBcbiAgdHJ5IHtcbiAgICAvLyBDcmVhdGUgbmV3IHVzZXJcbiAgICBjb25zdCBuZXdVc2VyOiBVc2VyID0ge1xuICAgICAgaWQ6IERhdGUubm93KCkudG9TdHJpbmcoKSxcbiAgICAgIGVtYWlsLFxuICAgICAgbmFtZSxcbiAgICAgIGF2YXRhcjogYGh0dHBzOi8vdWktYXZhdGFycy5jb20vYXBpLz9uYW1lPSR7ZW5jb2RlVVJJQ29tcG9uZW50KG5hbWUpfSZiYWNrZ3JvdW5kPXJhbmRvbWAsXG4gICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgfTtcbiAgICBcbiAgICBjb25zb2xlLmxvZygnQ3JlYXRlZCBuZXcgdXNlcjonLCBuZXdVc2VyKTtcbiAgICBcbiAgICAvLyBBZGQgdGhlIG5ldyB1c2VyIHRvIHRoZSBtb2NrIHVzZXJzIGFycmF5XG4gICAgbW9ja1VzZXJzLnB1c2gobmV3VXNlcik7XG4gICAgY29uc29sZS5sb2coJ0FkZGVkIHVzZXIgdG8gbW9jayBkYXRhYmFzZS4gVG90YWwgdXNlcnM6JywgbW9ja1VzZXJzLmxlbmd0aCk7XG4gICAgXG4gICAgY29uc29sZS5sb2coJ0dlbmVyYXRpbmcgdG9rZW4gZm9yIG5ldyB1c2VyLi4uJyk7XG4gICAgY29uc3QgdG9rZW4gPSBnZW5lcmF0ZVRva2VuKG5ld1VzZXIpO1xuICAgIGNvbnNvbGUubG9nKCdHZW5lcmF0ZWQgdG9rZW46JywgdG9rZW4gPyBgJHt0b2tlbi5zdWJzdHJpbmcoMCwgMTApfS4uLmAgOiAnbnVsbCcpO1xuICAgIFxuICAgIGlmICghdG9rZW4pIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignRmFpbGVkIHRvIGdlbmVyYXRlIHRva2VuJyk7XG4gICAgfVxuICAgIFxuICAgIHJldHVybiB7IHRva2VuLCB1c2VyOiBuZXdVc2VyIH07XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgaW4gc2lnbnVwVXNlcjonLCB7XG4gICAgICBuYW1lOiBlcnJvcj8ubmFtZSxcbiAgICAgIG1lc3NhZ2U6IGVycm9yPy5tZXNzYWdlLFxuICAgICAgc3RhY2s6IGVycm9yPy5zdGFjayxcbiAgICAgIGVycm9yOiBlcnJvclxuICAgIH0pO1xuICAgIHRocm93IGVycm9yOyAvLyBSZS10aHJvdyB0byBiZSBoYW5kbGVkIGJ5IHRoZSBjYWxsZXJcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0VXNlckZyb21Ub2tlbih0b2tlbjogc3RyaW5nKTogUHJvbWlzZTxVc2VyIHwgbnVsbD4ge1xuICBjb25zb2xlLmxvZygnZ2V0VXNlckZyb21Ub2tlbiBjYWxsZWQgd2l0aCB0b2tlbjonLCB0b2tlbiA/IGAke3Rva2VuLnN1YnN0cmluZygwLCAxMCl9Li4uYCA6ICdudWxsJyk7XG4gIFxuICBpZiAoIXRva2VuKSB7XG4gICAgY29uc29sZS5sb2coJ05vIHRva2VuIHByb3ZpZGVkJyk7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgXG4gIHRyeSB7XG4gICAgY29uc29sZS5sb2coJ0NhbGxpbmcgdmVyaWZ5VG9rZW4uLi4nKTtcbiAgICBjb25zdCBkZWNvZGVkID0gdmVyaWZ5VG9rZW4odG9rZW4pO1xuICAgIGNvbnNvbGUubG9nKCd2ZXJpZnlUb2tlbiByZXN1bHQ6JywgZGVjb2RlZCk7XG4gICAgXG4gICAgaWYgKCFkZWNvZGVkIHx8ICFkZWNvZGVkLnVzZXJJZCkge1xuICAgICAgY29uc29sZS5lcnJvcignSW52YWxpZCBvciBtaXNzaW5nIHVzZXJJZCBpbiBkZWNvZGVkIHRva2VuJyk7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgXG4gICAgY29uc29sZS5sb2coJ0xvb2tpbmcgZm9yIHVzZXIgd2l0aCBJRDonLCBkZWNvZGVkLnVzZXJJZCk7XG4gICAgY29uc3QgdXNlciA9IG1vY2tVc2Vycy5maW5kKHUgPT4gdS5pZCA9PT0gZGVjb2RlZC51c2VySWQpO1xuICAgIGNvbnNvbGUubG9nKCdGb3VuZCB1c2VyOicsIHVzZXIpO1xuICAgIFxuICAgIGlmICghdXNlcikge1xuICAgICAgY29uc29sZS5lcnJvcignVXNlciBub3QgZm91bmQgaW4gbW9jayBkYXRhYmFzZScpO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gdXNlciB8fCBudWxsO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGluIGdldFVzZXJGcm9tVG9rZW46Jywge1xuICAgICAgbmFtZTogZXJyb3I/Lm5hbWUsXG4gICAgICBtZXNzYWdlOiBlcnJvcj8ubWVzc2FnZSxcbiAgICAgIHN0YWNrOiBlcnJvcj8uc3RhY2ssXG4gICAgICBlcnJvcjogZXJyb3JcbiAgICB9KTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuXG4vLyBUb2tlbiBzdG9yYWdlIGhlbHBlcnNcbmV4cG9ydCBmdW5jdGlvbiBzdG9yZVRva2VuKHRva2VuOiBzdHJpbmcpOiB2b2lkIHtcbiAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2F1dGhfdG9rZW4nLCB0b2tlbik7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFN0b3JlZFRva2VuKCk6IHN0cmluZyB8IG51bGwge1xuICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICByZXR1cm4gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2F1dGhfdG9rZW4nKTtcbiAgfVxuICByZXR1cm4gbnVsbDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZVN0b3JlZFRva2VuKCk6IHZvaWQge1xuICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnYXV0aF90b2tlbicpO1xuICB9XG59XG4iXSwibmFtZXMiOlsiand0IiwiSldUX1NFQ1JFVCIsIkpXVF9FWFBJUkVTX0lOIiwibW9ja1VzZXJzIiwiaWQiLCJlbWFpbCIsIm5hbWUiLCJhdmF0YXIiLCJjcmVhdGVkQXQiLCJEYXRlIiwiY29uc29sZSIsImxvZyIsImdlbmVyYXRlVG9rZW4iLCJ1c2VyIiwic2lnbiIsInVzZXJJZCIsImV4cGlyZXNJbiIsInZlcmlmeVRva2VuIiwidG9rZW4iLCJ0eXBlIiwiZXJyb3IiLCJkZWNvZGVkIiwidmVyaWZ5IiwiRXJyb3IiLCJtZXNzYWdlIiwic3RhY2siLCJsb2dpblVzZXIiLCJwYXNzd29yZCIsInRvTG93ZXJDYXNlIiwiU3RyaW5nIiwic2lnbnVwVXNlciIsIlByb21pc2UiLCJyZXNvbHZlIiwic2V0VGltZW91dCIsImV4aXN0aW5nVXNlciIsImZpbmQiLCJ1IiwibmV3VXNlciIsIm5vdyIsInRvU3RyaW5nIiwiZW5jb2RlVVJJQ29tcG9uZW50IiwicHVzaCIsImxlbmd0aCIsInN1YnN0cmluZyIsImdldFVzZXJGcm9tVG9rZW4iLCJzdG9yZVRva2VuIiwibG9jYWxTdG9yYWdlIiwic2V0SXRlbSIsImdldFN0b3JlZFRva2VuIiwiZ2V0SXRlbSIsInJlbW92ZVN0b3JlZFRva2VuIiwicmVtb3ZlSXRlbSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/lib/auth.ts\n"));

/***/ })

});